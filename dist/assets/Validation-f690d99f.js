import{r,j as e,u as V,f as L,g as S,a as M}from"./index-80b832ab.js";import{G as E,a as I,b as A,I as F}from"./index.esm-f6f86b1a.js";const B=({validator:s,selectedValidators:i,setSelectedValidators:c})=>{const[l,h]=r.useState(!1);r.useEffect(()=>{i.includes(s.codename)?h(!0):h(!1)},[i]);const p=r.useCallback(t=>{t.preventDefault();const u=t.target.checked,o=Number(t.target.value);c(n=>u?[...n,o]:n.filter(m=>m!==o))},[c]);return e.jsxs("div",{className:"bg-white p-4 rounded-lg select-none  border border-stroke shadow-2",children:[e.jsxs("div",{className:"flex  justify-between items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold line-clamp-1 break-words overflow-hidden",children:s.name}),e.jsxs("label",{htmlFor:`checkbox-${s.name}`,className:"flex items-center gap-1 py-1 px-2 rounded-lg font-bold border border-stroke cursor-pointer",children:["Select",e.jsx("input",{id:`checkbox-${s.name}`,type:"checkbox",value:s.codename,className:"sr-only",onChange:t=>p(t),checked:l}),e.jsx("div",{className:` flex h-5 w-5 items-center justify-center rounded border ${l&&"border-primary bg-gray dark:bg-transparent"}`,children:e.jsx("span",{className:`opacity-0 ${l&&"!opacity-100"}`,children:e.jsx("svg",{width:"11",height:"8",viewBox:"0 0 11 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M10.0915 0.951972L10.0867 0.946075L10.0813 0.940568C9.90076 0.753564 9.61034 0.753146 9.42927 0.939309L4.16201 6.22962L1.58507 3.63469C1.40401 3.44841 1.11351 3.44879 0.932892 3.63584C0.755703 3.81933 0.755703 4.10875 0.932892 4.29224L0.932878 4.29225L0.934851 4.29424L3.58046 6.95832C3.73676 7.11955 3.94983 7.2 4.1473 7.2C4.36196 7.2 4.55963 7.11773 4.71406 6.9584L10.0468 1.60234C10.2436 1.4199 10.2421 1.1339 10.0915 0.951972ZM4.2327 6.30081L4.2317 6.2998C4.23206 6.30015 4.23237 6.30049 4.23269 6.30082L4.2327 6.30081Z",fill:"#3056D3",stroke:"#3056D3",strokeWidth:"0.4"})})})})]})]}),e.jsx("p",{children:s.descriptions})]})};function H(s){return E({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 384H256c-35.3 0-64-28.7-64-64V64c0-35.3 28.7-64 64-64H396.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V320c0 35.3-28.7 64-64 64zM64 128h96v48H64c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H256c8.8 0 16-7.2 16-16V416h48v32c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V192c0-35.3 28.7-64 64-64z"}}]})(s)}const z=()=>{const[s,i]=r.useState(""),[c,l]=r.useState(""),[h,p]=r.useState(!1),[t,u]=r.useState([]),[o,n]=r.useState({name:!1,selectedValidators:!1}),{userData:m}=V(),{createApp:y,isLoading:j,error:f,APIData:d,setError:w}=L(),{getAllValidators:g,validators:k,isLoading:v,error:N}=S(),b=M();r.useEffect(()=>{k.length>0||g()},[g]),r.useEffect(()=>{t.length!==0&&n(a=>({...a,selectedValidators:!1}))},[t]);const C=a=>{a.preventDefault();const x={name:s==="",selectedValidators:t.length===0};n(x),!(x.name||x.selectedValidators)&&m&&y(m.sub,m.email,s,t,p)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" w-full mx-auto  ",children:e.jsxs("div",{className:"bg-white p-2 xsm:p-4",children:[e.jsxs("div",{className:"text-2xl mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"text-black cursor-pointer",onClick:()=>b(-1)}),e.jsx("h1",{className:"font-bold text-black ",children:"Create New App"})]}),e.jsxs("div",{className:"mb-4 rounded-lg p-2",children:[e.jsx("label",{htmlFor:"app-name",className:"mb-3 block font-semibold text-black dark:text-white",children:"App Name"}),e.jsx("input",{type:"text",id:"app-name",value:s,onChange:a=>{i(a.target.value),w(null),n(x=>({...x,name:!1}))},className:"w-full max-w-150 rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary mb-2",placeholder:"Enter your app name"})]}),e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-black mx-2",children:"Validators"})}),N&&!v&&e.jsxs("div",{className:" text-center font-bold text-meta-1 rounded-sm border border-stroke bg-white py-6 px-7.5 shadow-default ",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),e.jsx("span",{children:f})]}),e.jsxs("button",{className:" shadow-default border bg-[#00BDD6] text-white border-stroke rounded-sm hover:bg-stroke transition-all p-2 flex gap-2 mx-auto",onClick:()=>{g()},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),"Reload"]})]}),v&&!N?e.jsx("p",{className:"text-center mt-4 font-semibold mx-2",children:"Loading Validators..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" py-4 grid xl:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-4 mx-2",children:k.map(a=>e.jsx(B,{validator:a,setSelectedValidators:u,selectedValidators:t},a.codename))}),f&&e.jsx("p",{className:" text-red-500  mt-2 mb-2 pl-2 font-bold",children:f}),o.name&&e.jsx("p",{className:" text-red-500  mt-2 mb-2 pl-2 font-bold",children:"Please Enter App Name First"}),o.selectedValidators&&!o.name&&e.jsx("p",{className:" text-red-500  mt-2 mb-2 pl-2 font-bold",children:"Please Select any one Validator"}),k.length!==0&&e.jsxs("div",{className:"flex gap-4 p-2",children:[e.jsx("button",{type:"submit",className:"bg-primary shadow-4 hover:bg-opacity-90 text-white font-bold py-1 px-4 uppercase  rounded focus:outline-none focus:shadow-outline",onClick:C,disabled:j,children:j?"Creating...":"Create"}),e.jsx("button",{type:"reset",className:"text-black font-bold uppercase",onClick:()=>{i(""),u([]),w(null),b(-1)},children:"Cancel"})]})]})]})}),h&&e.jsx("div",{className:"fixed p-2 top-0 left-0 w-screen h-screen flex justify-center items-center  bg-black/50 overflow-hidden",children:e.jsxs("div",{className:" bg-white shadow-4   rounded-lg overflow-hidden w-full max-w-150 ",children:[e.jsxs("div",{className:"bg-gray p-2 flex justify-between",children:[e.jsxs("h1",{className:" font-extrabold text-black flex items-center gap-2",children:[e.jsx(A,{className:"text-2xl"}),"Save your API key"]}),e.jsx(F,{className:"text-2xl",onClick:()=>{p(!1),b("/dashboard/apps")}})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"mb-4",children:["Save your API key Somewhere safe.",e.jsx("span",{className:"font-bold text-black",children:"You will not be able to see it again after you close this model."})," ","If you loose it you will have to request for it or create a new one."]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("input",{type:"text",readOnly:!0,value:d==null?void 0:d.api_key,className:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"}),e.jsxs("button",{className:"flex font-bold font-white p-3 cursor-pointer hover:bg-black/90  rounded-lg gap-2 items-center  bg-black text-white",onClick:()=>navigator.clipboard.writeText(`${d==null?void 0:d.api_key}`).then(()=>{l("Text copied to clipboard!")},a=>{l("Failed to copy text: "+a)}),children:[e.jsx(H,{}),"Copy"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:` font-bold w-full text-center ${c==="Text copied to clipboard!"?"text-success":"text-red-500"}`,children:c}),e.jsx("button",{className:"bg-gray shadow-4 hover:bg-opacity-90  font-bold py-2 px-4 text-sm rounded focus:outline-none focus:shadow-outline mt-4",onClick:()=>{p(!1),b("/dashboard/apps")},children:"Done"})]})]})]})})]})};export{z as default};
